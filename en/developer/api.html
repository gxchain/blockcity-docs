<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API列表 | The Small Application</title>
    <meta name="description" content="The Small Application is based on the BlockCity DAPP, helping developers to quickly develop and launch their own applications, serving the massive blockchain users of BlockCity.">
    
    
    <link rel="preload" href="/blockcity/assets/css/0.styles.b7926cab.css" as="style"><link rel="preload" href="/blockcity/assets/js/app.dd063d02.js" as="script"><link rel="preload" href="/blockcity/assets/js/15.b18846f1.js" as="script"><link rel="prefetch" href="/blockcity/assets/js/10.33a9ca4b.js"><link rel="prefetch" href="/blockcity/assets/js/11.6e12906d.js"><link rel="prefetch" href="/blockcity/assets/js/12.92166a06.js"><link rel="prefetch" href="/blockcity/assets/js/13.d619c38b.js"><link rel="prefetch" href="/blockcity/assets/js/14.c6852a6e.js"><link rel="prefetch" href="/blockcity/assets/js/16.682216e4.js"><link rel="prefetch" href="/blockcity/assets/js/17.261a2ee9.js"><link rel="prefetch" href="/blockcity/assets/js/18.768c0c10.js"><link rel="prefetch" href="/blockcity/assets/js/19.c7b0306f.js"><link rel="prefetch" href="/blockcity/assets/js/20.e28b8d88.js"><link rel="prefetch" href="/blockcity/assets/js/21.c7146780.js"><link rel="prefetch" href="/blockcity/assets/js/22.c87b9420.js"><link rel="prefetch" href="/blockcity/assets/js/23.99ca732a.js"><link rel="prefetch" href="/blockcity/assets/js/24.0e0a396c.js"><link rel="prefetch" href="/blockcity/assets/js/25.0fb7da64.js"><link rel="prefetch" href="/blockcity/assets/js/26.c0b8b8ad.js"><link rel="prefetch" href="/blockcity/assets/js/27.a0355dd3.js"><link rel="prefetch" href="/blockcity/assets/js/28.e142bc61.js"><link rel="prefetch" href="/blockcity/assets/js/29.af9a52ec.js"><link rel="prefetch" href="/blockcity/assets/js/3.859a4d47.js"><link rel="prefetch" href="/blockcity/assets/js/30.7da6b7b5.js"><link rel="prefetch" href="/blockcity/assets/js/31.c26a9311.js"><link rel="prefetch" href="/blockcity/assets/js/32.f425157e.js"><link rel="prefetch" href="/blockcity/assets/js/33.ea878810.js"><link rel="prefetch" href="/blockcity/assets/js/34.e08feb9c.js"><link rel="prefetch" href="/blockcity/assets/js/35.0eeabdfa.js"><link rel="prefetch" href="/blockcity/assets/js/36.3d4fc0af.js"><link rel="prefetch" href="/blockcity/assets/js/37.059882f7.js"><link rel="prefetch" href="/blockcity/assets/js/38.eea6d96d.js"><link rel="prefetch" href="/blockcity/assets/js/4.059e1459.js"><link rel="prefetch" href="/blockcity/assets/js/5.48244305.js"><link rel="prefetch" href="/blockcity/assets/js/6.44cfa878.js"><link rel="prefetch" href="/blockcity/assets/js/7.35e6b462.js"><link rel="prefetch" href="/blockcity/assets/js/8.0022d733.js"><link rel="prefetch" href="/blockcity/assets/js/9.ef3fd925.js"><link rel="prefetch" href="/blockcity/assets/js/vendors~docsearch.d932dc62.js">
    <link rel="stylesheet" href="/blockcity/assets/css/0.styles.b7926cab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blockcity/en/" class="home-link router-link-active"><!----> <span class="site-name">The Small Application</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blockcity/en/introduce/" class="nav-link">Introduce</a></div><div class="nav-item"><a href="/blockcity/en/developer/" class="nav-link router-link-active">Developer</a></div><div class="nav-item"><a href="/blockcity/en/design/" class="nav-link">Design</a></div><div class="nav-item"><a href="/blockcity/en/operation/" class="nav-link">Operation</a></div><div class="nav-item"><a href="/blockcity/en/faq/" class="nav-link">FAQ</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blockcity/developer/api.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/blockcity/en/developer/api.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/gxchain/blockcity-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blockcity/en/introduce/" class="nav-link">Introduce</a></div><div class="nav-item"><a href="/blockcity/en/developer/" class="nav-link router-link-active">Developer</a></div><div class="nav-item"><a href="/blockcity/en/design/" class="nav-link">Design</a></div><div class="nav-item"><a href="/blockcity/en/operation/" class="nav-link">Operation</a></div><div class="nav-item"><a href="/blockcity/en/faq/" class="nav-link">FAQ</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blockcity/developer/api.html" class="nav-link">简体中文</a></li><li class="dropdown-item"><!----> <a href="/blockcity/en/developer/api.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <a href="https://github.com/gxchain/blockcity-docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span></span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blockcity/en/developer/" class="sidebar-link">开发者入驻</a></li><li><a href="/blockcity/en/developer/create.html" class="sidebar-link">创建小应用</a></li><li><a href="/blockcity/en/developer/prepare.html" class="sidebar-link">小应用开发准备</a></li><li><a href="/blockcity/en/developer/release.html" class="sidebar-link">小应用提交</a></li><li><a href="/blockcity/en/developer/capacity.html" class="sidebar-link">开放能力</a></li><li><a href="/blockcity/en/developer/api.html" class="active sidebar-link">API列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#api签名" class="sidebar-link">API签名</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#令牌签名" class="sidebar-link">令牌签名</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#支付签名" class="sidebar-link">支付签名</a></li></ul></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#授权api" class="sidebar-link">授权API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#获取令牌" class="sidebar-link">获取令牌</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#刷新令牌" class="sidebar-link">刷新令牌</a></li></ul></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#用户数据api" class="sidebar-link">用户数据API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#用户基本信息" class="sidebar-link">用户基本信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#支付api" class="sidebar-link">支付API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#预创建支付" class="sidebar-link">预创建支付</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#转账" class="sidebar-link">转账</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#查询交易" class="sidebar-link">查询交易</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#退款接口" class="sidebar-link">退款接口</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#查询退款" class="sidebar-link">查询退款</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#关闭交易" class="sidebar-link">关闭交易</a></li><li class="sidebar-sub-header"><a href="/blockcity/en/developer/api.html#支持支付币种" class="sidebar-link">支持支付币种</a></li></ul></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="api列表"><a href="#api列表" aria-hidden="true" class="header-anchor">#</a> API列表</h1> <h2 id="api签名"><a href="#api签名" aria-hidden="true" class="header-anchor">#</a> API签名</h2> <h3 id="令牌签名"><a href="#令牌签名" aria-hidden="true" class="header-anchor">#</a> 令牌签名</h3> <p>为了防止API调用过程中被黑客恶意篡改，调用任何一个API都需要携带签名，服务端会根据请求参数，对签名进行验证，签名不合法的请求将会被拒绝。</p> <blockquote><p><font size="2">对所有API请求参数（加上client_secret，除去sign），根据参数名称的ASCII码表的顺序排序。如：foo:1, bar:2, foo_bar:3, secret:4排序后的顺序是bar:2, foo:1, foo_bar:3, secret:4。</font></p> <p><font size="2">将排序好的参数名和参数值拼装在一起，根据上面的示例得到的结果为：bar2foo1foo_bar3foobar4。</font></p> <p><font size="2">把拼装好的字符串采用utf-8编码，使用MD5算法md5(bar2foo1foo_bar3 secret4)；</font></p></blockquote> <h4 id="签名示例"><a href="#签名示例" aria-hidden="true" class="header-anchor">#</a> 签名示例</h4> <ul><li>设置参数值</li></ul> <div class="language- extra-class"><pre class="language-text"><code>method = &quot;user.baseinfo&quot;
client_id = &quot;2wE3tlWcRdVRaHhi&quot;
access_token = &quot;d12fd13rf3f&quot;
timestamp = &quot;1524714213828&quot;
</code></pre></div><ul><li>按ASCII顺序排序</li></ul> <div class="language- extra-class"><pre class="language-text"><code>access_token = &quot;d12fd13rf3f&quot;
client_id = &quot;2wE3tlWcRdVRaHhi&quot;
client_secret = &quot;bapi1V1FqvOkPHDMUWdBtzYD83sY0nsN&quot;
method = &quot;user.baseinfo&quot;
timestamp = &quot;1524714213828&quot;
</code></pre></div><ul><li>拼接参数名与参数值</li></ul> <div class="language- extra-class"><pre class="language-text"><code>access_tokend12fd13rf3fclient_id2wE3tlWcRdVRaHhiclient_secretbapi1V1FqvOkPHDMUWdBtzYD83sY0nsNmethoduser.baseinfotimestamp1524714213828
</code></pre></div><ul><li>生成签名， md5(拼接的参数)</li></ul> <div class="language- extra-class"><pre class="language-text"><code>sign = 5f6e14cbc5326347a3c4c7f87960d64b
</code></pre></div><h4 id="java代码示例"><a href="#java代码示例" aria-hidden="true" class="header-anchor">#</a> JAVA代码示例</h4> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>codec<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>commons<span class="token operator">-</span>codec<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.10</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>


Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span>String<span class="token punctuation">&gt;</span></span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;client_id&quot;</span><span class="token punctuation">,</span>appId<span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;method&quot;</span><span class="token punctuation">,</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;access_token&quot;</span><span class="token punctuation">,</span>accessToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;timestamp&quot;</span><span class="token punctuation">,</span>timestamp<span class="token punctuation">)</span><span class="token punctuation">;</span>
params<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;client_secret&quot;</span><span class="token punctuation">,</span>appSecret<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> String <span class="token function">signRequest</span><span class="token punctuation">(</span>Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> String<span class="token punctuation">&gt;</span></span> params<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{</span>
    <span class="token comment">// 第一步：对参数进行ASCII排序</span>
    String<span class="token punctuation">[</span><span class="token punctuation">]</span> keys <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Arrays<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span>keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 第二步：把所有参数名和参数值串在一起</span>
    StringBuilder query <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>String key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String value <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        query<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 第三步：md5加密</span>
    <span class="token keyword">return</span> DigestUtils<span class="token punctuation">.</span><span class="token function">md5Hex</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="支付签名"><a href="#支付签名" aria-hidden="true" class="header-anchor">#</a> 支付签名</h3> <p>为了防止API调用过程中被黑客恶意篡改，调用任何一个API都需要携带签名，服务端会根据请求参数，对签名进行验证，签名不合法的请求将会被拒绝。</p> <p>开发者需提供一对RSA(2048位)公私钥，公钥上传给布洛克城，在小应用服务端用私钥加密签名串，传在sign字段里。公私钥可以通过<a href="http://web.chacuo.net/netrsakeypair" target="_blank" rel="noopener noreferrer">在线生成工具<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>生成，密钥位数请选择2048位，加密格式为PKCS#8。</p> <p>加密内容 ： rsa(biz_content+timestamp)</p> <h4 id="签名示例-2"><a href="#签名示例-2" aria-hidden="true" class="header-anchor">#</a> 签名示例</h4> <div class="language-java extra-class"><pre class="language-java"><code>PayCommonParam param <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PayCommonParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param<span class="token punctuation">.</span><span class="token function">setApp_id</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param<span class="token punctuation">.</span><span class="token function">setMethod</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param<span class="token punctuation">.</span><span class="token function">setNotify_url</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param<span class="token punctuation">.</span><span class="token function">setTimestamp</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param<span class="token punctuation">.</span><span class="token function">setVersion</span><span class="token punctuation">(</span><span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
InitPayParam initPayParam <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InitPayParam</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
initPayParam<span class="token punctuation">.</span><span class="token function">setCurrency</span><span class="token punctuation">(</span><span class="token string">&quot;GXS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
initPayParam<span class="token punctuation">.</span><span class="token function">setOut_trade_no</span><span class="token punctuation">(</span><span class="token string">&quot;商户订单号&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
initPayParam<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;测试&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
initPayParam<span class="token punctuation">.</span><span class="token function">setTotal_amount</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigDecimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param<span class="token punctuation">.</span><span class="token function">setBiz_content</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>initPayParam<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
param<span class="token punctuation">.</span><span class="token function">setSign</span><span class="token punctuation">(</span>RsaSignature<span class="token punctuation">.</span><span class="token function">rsaSign</span><span class="token punctuation">(</span>param<span class="token punctuation">.</span><span class="token function">getBiz_content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>param<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;rsa私钥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="代码下载"><a href="#代码下载" aria-hidden="true" class="header-anchor">#</a> 代码下载</h4> <p><a href="http://gxb-doc.oss-cn-hangzhou.aliyuncs.com/blockpay/paydemo.zip" target="_blank" rel="noopener noreferrer">JAVA代码示例下载<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="授权api"><a href="#授权api" aria-hidden="true" class="header-anchor">#</a> 授权API</h2> <h3 id="获取令牌"><a href="#获取令牌" aria-hidden="true" class="header-anchor">#</a> 获取令牌</h3> <p>开发者可通过获取到的授权code换取access_token，授权code作为换取access_token的票据，每次用户授权完成，回调地址中的授权code将不一样，授权code只能使用一次，授权code5分钟失效。</p> <h4 id="请求地址"><a href="#请求地址" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="https://sandbox.blockcity.gxb.io/auth/oauth/access_token" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/auth/oauth/access_token<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://open.blockcity.gxb.io/oauth/access_token" target="_blank" rel="noopener noreferrer">https://open.blockcity.gxb.io/oauth/access_token<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="公共请求参数"><a href="#公共请求参数" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">字段</th> <th style="text-align:left">是否必选</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">client_id</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">等同于appid，创建应用时获得</td></tr> <tr><td style="text-align:left">client_secret</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">appid对应的密钥，即app_secret</td></tr> <tr><td style="text-align:left">code</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">用户授权后生成的授权code</td></tr></tbody></table> <h4 id="公共响应参数"><a href="#公共响应参数" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">请求结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">-</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="响应参数"><a href="#响应参数" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">access_token</td> <td style="text-align:left">string</td> <td style="text-align:left">32</td> <td style="text-align:left">访问令牌</td></tr> <tr><td style="text-align:left">refresh_token</td> <td style="text-align:left">string</td> <td style="text-align:left">32</td> <td style="text-align:left">刷新令牌</td></tr> <tr><td style="text-align:left">expires_date</td> <td style="text-align:left">long</td> <td style="text-align:left">-</td> <td style="text-align:left">令牌有效期</td></tr></tbody></table> <h4 id="请求示例"><a href="#请求示例" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <ul><li>组装HTTP请求 将所有参数名和参数值采用utf-8进行URL编码，然后通过GET发起请求，如：</li></ul> <blockquote><p><font size="2">正式环境 ：<a href="https://open.blockcity.gxb.io/oauth/access_token?client_id=2wE3tlWcRdVRaHhi&amp;client_secret=4eARMt0lCCQGyLP7ubVLxCJUaQ7Y77EN&amp;code=1234" target="_blank" rel="noopener noreferrer">https://open.blockcity.gxb.io/oauth/access_token?client_id=2wE3tlWcRdVRaHhi&amp;client_secret=4eARMt0lCCQGyLP7ubVLxCJUaQ7Y77EN&amp;code=1234<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></font></p> <p><font size="2">沙箱环境 ：<a href="https://sandbox.blockcity.gxb.io/auth/oauth/access_token?client_id=2wE3tlWcRdVRaHhi&amp;client_secret=4eARMt0lCCQGyLP7ubVLxCJUaQ7Y77EN&amp;code=1234" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/auth/oauth/access_token?client_id=2wE3tlWcRdVRaHhi&amp;client_secret=4eARMt0lCCQGyLP7ubVLxCJUaQ7Y77EN&amp;code=1234<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></font></p></blockquote> <h4 id="响应示例"><a href="#响应示例" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;access_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;f23t1g13g13g&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;refresh_token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;12323g2gg4g4&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;expires_date&quot;</span><span class="token operator">:</span> <span class="token number">1527248284900</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="刷新令牌"><a href="#刷新令牌" aria-hidden="true" class="header-anchor">#</a> 刷新令牌</h3> <p>每个access_token目前有效期为30天，可调用refresh接口刷新时长，再次刷新有效期为30天，只能刷新一次。</p> <h4 id="请求地址-2"><a href="#请求地址-2" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="https://sandbox.blockcity.gxb.io/auth/oauth/refresh_token" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/auth/oauth/refresh_token<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://open.blockcity.gxb.io/oauth/refresh_token" target="_blank" rel="noopener noreferrer">https://open.blockcity.gxb.io/oauth/refresh_token<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="公共请求参数-2"><a href="#公共请求参数-2" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">字段</th> <th style="text-align:left">是否必选</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">client_id</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">等同于appid，创建应用时获得</td></tr> <tr><td style="text-align:left">client_secret</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">appid对应的密钥，即app_secret</td></tr> <tr><td style="text-align:left">refresh_token</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">刷新令牌</td></tr></tbody></table> <h4 id="公共响应参数-2"><a href="#公共响应参数-2" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">请求结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">-</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="响应参数-2"><a href="#响应参数-2" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">expires_date</td> <td style="text-align:left">long</td> <td style="text-align:left">-</td> <td style="text-align:left">令牌有效期</td></tr></tbody></table> <h4 id="请求示例-2"><a href="#请求示例-2" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <ul><li>组装HTTP请求 将所有参数名和参数值采用utf-8进行URL编码，然后通过GET发起请求，如：</li></ul> <blockquote><p><font size="2">正式环境 ：https://open.blockcity.gxb.io/oauth/refresh_token?client_id=2wE3tlWcRdVRaHhi&amp;client_secret=4eARMt0lCCQGyLP7ubVLxCJUaQ7Y77EN&amp;refresh_token=12323g2gg4g4</font></p> <p><font size="2">沙箱环境 ：https://sandbox.blockcity.gxb.io/auth/oauth/refresh_token?client_id=2wE3tlWcRdVRaHhi&amp;client_secret=4eARMt0lCCQGyLP7ubVLxCJUaQ7Y77EN&amp;refresh_token=12323g2gg4g4</font></p></blockquote> <h4 id="响应示例-2"><a href="#响应示例-2" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;expires_date&quot;</span><span class="token operator">:</span> <span class="token number">1527248284900</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="用户数据api"><a href="#用户数据api" aria-hidden="true" class="header-anchor">#</a> 用户数据API</h2> <h3 id="用户基本信息"><a href="#用户基本信息" aria-hidden="true" class="header-anchor">#</a> 用户基本信息</h3> <p>开发者除了可以拿到布洛克用户唯一编号（uuid），还能获取更多的信息，包括昵称，居民号、是否是创世居民、注册时间、是否通过二要素实名认证、是否通过KYC实名认证、布洛克城头像。</p> <h4 id="请求地址-3"><a href="#请求地址-3" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="https://sandbox.blockcity.gxb.io/openapi/user/baseinfo" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/openapi/user/baseinfo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://open.blockcity.gxb.io/api/user/baseinfo" target="_blank" rel="noopener noreferrer">https://open.blockcity.gxb.io/api/user/baseinfo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="公共请求参数-3"><a href="#公共请求参数-3" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">client_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">appId</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，user.baseinfo</td></tr> <tr><td style="text-align:left">access_token</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">用户访问令牌</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">时间戳，与服务器时间相差在5分钟以内才有效</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="/blockcity/en/developer/api.html#令牌签名">令牌签名算法</a></td></tr></tbody></table> <h4 id="公共响应参数-3"><a href="#公共响应参数-3" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">code</td> <td style="text-align:left">String</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">网关返回码,<a href="/blockcity/en/developer/api.html#业务错误码">详见文档</a></td> <td style="text-align:left">0</td></tr> <tr><td style="text-align:left">msg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">-</td> <td style="text-align:left">网关返回错误描述</td> <td style="text-align:left">系统内部错误</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">-</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="响应参数-3"><a href="#响应参数-3" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">uuid</td> <td style="text-align:left">string</td> <td style="text-align:left">32</td> <td style="text-align:left">G-ID</td></tr> <tr><td style="text-align:left">nickName</td> <td style="text-align:left">string</td> <td style="text-align:left">64</td> <td style="text-align:left">昵称</td></tr> <tr><td style="text-align:left">memberNumber</td> <td style="text-align:left">int</td> <td style="text-align:left">-</td> <td style="text-align:left">居民号</td></tr> <tr><td style="text-align:left">founder</td> <td style="text-align:left">int</td> <td style="text-align:left">-</td> <td style="text-align:left">是否创始居民，1是0否</td></tr> <tr><td style="text-align:left">registerDate</td> <td style="text-align:left">long</td> <td style="text-align:left">-</td> <td style="text-align:left">注册时间</td></tr> <tr><td style="text-align:left">isKyc</td> <td style="text-align:left">boolean</td> <td style="text-align:left">-</td> <td style="text-align:left">是否人脸识别kyc</td></tr> <tr><td style="text-align:left">isTwoElement</td> <td style="text-align:left">boolean</td> <td style="text-align:left">-</td> <td style="text-align:left">是否实名</td></tr> <tr><td style="text-align:left">heads</td> <td style="text-align:left">string</td> <td style="text-align:left">512</td> <td style="text-align:left">头像</td></tr></tbody></table> <h4 id="请求示例-3"><a href="#请求示例-3" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <ul><li><p>组装HTTP请求 将所有参数名和参数值采用utf-8进行URL编码，然后通过GET或POST发起请求，如：</p> <blockquote><p><font size="2">正式环境 ：<a href="https://open.blockcity.gxb.io/api/user/baseinfo?client_id=2wE3tlWcRdVRaHhi&amp;method=user.baseinfo&amp;access_token=d12fd13rf3f&amp;timestamp=1524658239010&amp;sign=3d73f456febfa81a97f626c56d7a6419" target="_blank" rel="noopener noreferrer">https://open.blockcity.gxb.io/api/user/baseinfo?client_id=2wE3tlWcRdVRaHhi&amp;method=user.baseinfo&amp;access_token=d12fd13rf3f&amp;timestamp=1524658239010&amp;sign=3d73f456febfa81a97f626c56d7a6419<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></font></p> <p><font size="2">沙箱环境 ： <a href="http://sandbox.blockcity.gxb.io/openapi/user/baseinfo?client_id=2wE3tlWcRdVRaHhi&amp;method=user.baseinfo&amp;access_token=d12fd13rf3f&amp;timestamp=1524658239010&amp;sign=3d73f456febfa81a97f626c56d7a6419" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/openapi/user/baseinfo?client_id=2wE3tlWcRdVRaHhi&amp;method=user.baseinfo&amp;access_token=d12fd13rf3f&amp;timestamp=1524658239010&amp;sign=3d73f456febfa81a97f626c56d7a6419<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></font></p></blockquote></li></ul> <h4 id="响应示例-3"><a href="#响应示例-3" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;uuid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;124124342&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;nickName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;布洛克昵称&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;memberNumber&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;founder&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;registerDate&quot;</span><span class="token operator">:</span> <span class="token number">138594839384</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isKyc&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;isTwoElement&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token property">&quot;heads&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例"><a href="#异常示例" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;错误信息提示&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="业务错误码"><a href="#业务错误码" aria-hidden="true" class="header-anchor">#</a> 业务错误码</h4> <table><thead><tr><th style="text-align:left">code</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">0</td> <td style="text-align:left">表示接口成功</td></tr> <tr><td style="text-align:left">param.sign.invalid</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">param.timestamp.invalid</td> <td style="text-align:left">时间戳无效</td></tr> <tr><td style="text-align:left">param.appid.invalid</td> <td style="text-align:left">app_id无效</td></tr> <tr><td style="text-align:left">param.invalid</td> <td style="text-align:left">非法参数</td></tr> <tr><td style="text-align:left">default.error</td> <td style="text-align:left">服务异常</td></tr></tbody></table> <h2 id="支付api"><a href="#支付api" aria-hidden="true" class="header-anchor">#</a> 支付API</h2> <h3 id="预创建支付"><a href="#预创建支付" aria-hidden="true" class="header-anchor">#</a> 预创建支付</h3> <p>预先创建支付订单接口，对应的method请求参数为：blockpay.trade.app.pay</p> <h4 id="请求地址-4"><a href="#请求地址-4" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="http://sandbox.blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="请求方式"><a href="#请求方式" aria-hidden="true" class="header-anchor">#</a> 请求方式</h4> <blockquote><p><font size="2">method: POST</font></p> <p><font size="2">Content-Type: application/json</font></p></blockquote> <h4 id="公共请求参数-4"><a href="#公共请求参数-4" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">app_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">商户的appid</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，blockpay.trade.app.pay</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">long</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用时间戳</td></tr> <tr><td style="text-align:left">version</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口版本，固定为：1.0</td></tr> <tr><td style="text-align:left">notify_url</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">支付回调地址</td></tr> <tr><td style="text-align:left">biz_content</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">业务请求参数的集合 ，json格式</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="#%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D">签名算法</a></td></tr></tbody></table> <h4 id="请求参数"><a href="#请求参数" aria-hidden="true" class="header-anchor">#</a> 请求参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">subject</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">256</td> <td style="text-align:left">商品的标题</td></tr> <tr><td style="text-align:left">out_trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">商户唯一订单号</td></tr> <tr><td style="text-align:left">pay_expire</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">-</td> <td style="text-align:left">该笔订单允许的最晚付款时间，逾期将关闭交易，默认30m。取值范围：1m～1d，m-分钟，h-小时，d-天</td></tr> <tr><td style="text-align:left">total_amount</td> <td style="text-align:left">double</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">订单总金额，单位为元，精确到小数点后五位，取值范围[0.00001,100000000]</td></tr> <tr><td style="text-align:left">seller_id</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">32</td> <td style="text-align:left">收款方的用户uuid，不传代表应用对应商户</td></tr> <tr><td style="text-align:left">currency</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">支付币种，例：GXS</td></tr> <tr><td style="text-align:left">callback_params</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">512</td> <td style="text-align:left">支付回调时传的参数</td></tr></tbody></table> <h4 id="公共响应参数-4"><a href="#公共响应参数-4" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">响应结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">errorCode</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left"><a href="#%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%9A">错误码</a></td> <td style="text-align:left">pay.method.no-exist</td></tr> <tr><td style="text-align:left">errorMsg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">错误说明</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="错误码："><a href="#错误码：" aria-hidden="true" class="header-anchor">#</a> 错误码：</h4> <table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">pay.method.no-exist</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">pay.remote.service.error</td> <td style="text-align:left">服务异常</td></tr> <tr><td style="text-align:left">pay.appid.not.exist</td> <td style="text-align:left">appid不存在</td></tr> <tr><td style="text-align:left">pay.param.sign.error</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">pay.param.currency.not_support</td> <td style="text-align:left">不支持的币种</td></tr> <tr><td style="text-align:left">pay.param.notify_url.empty</td> <td style="text-align:left">回调地址不能为空</td></tr> <tr><td style="text-align:left">pay.param.invalid</td> <td style="text-align:left">参数不合法</td></tr></tbody></table> <h4 id="响应参数-4"><a href="#响应参数-4" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">out_trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">商户网站唯一订单号</td></tr> <tr><td style="text-align:left">trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">交易流水号</td></tr> <tr><td style="text-align:left">total_amount</td> <td style="text-align:left">double</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">该笔订单的资金总额</td></tr> <tr><td style="text-align:left">currency</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">支付币种，GXS</td></tr></tbody></table> <h4 id="请求示例-4"><a href="#请求示例-4" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <h4 id="响应示例-4"><a href="#响应示例-4" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;out1526393667695&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;trade_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;201805152202010145729234957&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;total_amount&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span><span class="token string">&quot;GXS&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例-2"><a href="#异常示例-2" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span><span class="token string">&quot;pay.remote.service.error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;服务错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="转账"><a href="#转账" aria-hidden="true" class="header-anchor">#</a> 转账</h3> <p>商户对用户进行直接转账，接口调用完成后直接转账成功，商户收银台收款账户即为转出账户。</p> <p>对应的method请求参数为：blockpay.trade.transfer</p> <h4 id="请求地址-5"><a href="#请求地址-5" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="http://sandbox.blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="请求方式-2"><a href="#请求方式-2" aria-hidden="true" class="header-anchor">#</a> 请求方式</h4> <blockquote><p><font size="2">method: POST</font></p> <p><font size="2">Content-Type: application/json</font></p></blockquote> <h4 id="公共请求参数-5"><a href="#公共请求参数-5" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">app_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">商户的appid</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，blockpay.trade.transfer</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">long</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用时间戳</td></tr> <tr><td style="text-align:left">version</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口版本，固定为：1.0</td></tr> <tr><td style="text-align:left">notify_url</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">支付回调地址</td></tr> <tr><td style="text-align:left">biz_content</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">业务请求参数的集合 ，json格式</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="#%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D">签名算法</a></td></tr></tbody></table> <h4 id="请求参数-2"><a href="#请求参数-2" aria-hidden="true" class="header-anchor">#</a> 请求参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">to_user</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">转入方的用户uuid，可根据交易详情查询buyer_id，也可通过auth的/user/baseinfo接口获取用户的uuid</td></tr> <tr><td style="text-align:left">amount</td> <td style="text-align:left">double</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">转账金额</td></tr> <tr><td style="text-align:left">currency</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">币种</td></tr> <tr><td style="text-align:left">remark</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">备注</td></tr> <tr><td style="text-align:left">pswd</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">商户绑定布洛克城账号的交易密码，，加密方式，md5(md5(密码)+timestamp)</td></tr> <tr><td style="text-align:left">outTransferNo</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">商户外部转账no，请传唯一id，一个外部转账no只能转账一次</td></tr></tbody></table> <h4 id="公共响应参数-5"><a href="#公共响应参数-5" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">响应结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">errorCode</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left"><a href="#%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%9A">错误码</a></td> <td style="text-align:left">pay.method.no-exist</td></tr> <tr><td style="text-align:left">errorMsg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">错误说明</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="错误码：-2"><a href="#错误码：-2" aria-hidden="true" class="header-anchor">#</a> 错误码：</h4> <table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">pay.method.no-exist</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">pay.remote.service.error</td> <td style="text-align:left">服务异常</td></tr> <tr><td style="text-align:left">pay.appid.not.exist</td> <td style="text-align:left">appid不存在</td></tr> <tr><td style="text-align:left">pay.param.sign.error</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">pay.param.currency.not_support</td> <td style="text-align:left">不支持的币种</td></tr> <tr><td style="text-align:left">pay.param.notify_url.empty</td> <td style="text-align:left">回调地址不能为空</td></tr> <tr><td style="text-align:left">pay.param.invalid</td> <td style="text-align:left">参数不合法</td></tr> <tr><td style="text-align:left">pay.api.transfer.out_transfer_no.exist</td> <td style="text-align:left">外部转账流水号已存在</td></tr> <tr><td style="text-align:left">pay.api.transfer.to_user.not_exist</td> <td style="text-align:left">转入方不存在</td></tr> <tr><td style="text-align:left">pay.error.balance.lack</td> <td style="text-align:left">账户余额不足</td></tr> <tr><td style="text-align:left">pay.error.failed</td> <td style="text-align:left">支付异常，请重试</td></tr></tbody></table> <h4 id="响应参数-5"><a href="#响应参数-5" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">transfer_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">转账订单号</td></tr></tbody></table> <h4 id="请求示例-5"><a href="#请求示例-5" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <h4 id="响应示例-5"><a href="#响应示例-5" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;transfer_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;20180515220201014572927220&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例-3"><a href="#异常示例-3" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span><span class="token string">&quot;pay.remote.service.error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;服务错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="查询交易"><a href="#查询交易" aria-hidden="true" class="header-anchor">#</a> 查询交易</h3> <p>交易状态主动查询接口，对应的method请求参数为：blockpay.trade.detail</p> <h4 id="请求地址-6"><a href="#请求地址-6" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="http://sandbox.blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="请求方式-3"><a href="#请求方式-3" aria-hidden="true" class="header-anchor">#</a> 请求方式</h4> <blockquote><p><font size="2">method: POST</font></p> <p><font size="2">Content-Type: application/json</font></p></blockquote> <h4 id="公共请求参数-6"><a href="#公共请求参数-6" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">app_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">商户的appid</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，blockpay.trade.detail</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">long</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用时间戳</td></tr> <tr><td style="text-align:left">version</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口版本，固定为：1.0</td></tr> <tr><td style="text-align:left">notify_url</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">支付回调地址</td></tr> <tr><td style="text-align:left">biz_content</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">业务请求参数的集合 ，json格式</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="#%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D">签名算法</a></td></tr></tbody></table> <h4 id="请求参数-3"><a href="#请求参数-3" aria-hidden="true" class="header-anchor">#</a> 请求参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">out_trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">可选</td> <td style="text-align:left">32</td> <td style="text-align:left">订单支付时传入的商户订单号,和交易号不能同时为空</td></tr> <tr><td style="text-align:left">trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">可选</td> <td style="text-align:left">32</td> <td style="text-align:left">交易流水号</td></tr></tbody></table> <h4 id="公共响应参数-6"><a href="#公共响应参数-6" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">响应结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">errorCode</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left"><a href="#%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%9A">错误码</a></td> <td style="text-align:left">pay.method.no-exist</td></tr> <tr><td style="text-align:left">errorMsg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">错误说明</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="错误码：-3"><a href="#错误码：-3" aria-hidden="true" class="header-anchor">#</a> 错误码：</h4> <table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">pay.method.no-exist</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">pay.remote.service.error</td> <td style="text-align:left">服务异常</td></tr> <tr><td style="text-align:left">pay.appid.not.exist</td> <td style="text-align:left">appid不存在</td></tr> <tr><td style="text-align:left">pay.param.sign.error</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">pay.param.currency.not_support</td> <td style="text-align:left">不支持的币种</td></tr> <tr><td style="text-align:left">pay.param.notify_url.empty</td> <td style="text-align:left">回调地址不能为空</td></tr> <tr><td style="text-align:left">pay.param.invalid</td> <td style="text-align:left">参数不合法</td></tr></tbody></table> <h4 id="响应参数-6"><a href="#响应参数-6" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">平台交易号</td></tr> <tr><td style="text-align:left">out_trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">商家订单号</td></tr> <tr><td style="text-align:left">trade_status</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">64</td> <td style="text-align:left">支付状态WAIT_BUYER_PAY（交易创建，等待买家付款）、PAY_SUCCESS(支付成功,可退款)TRADE_CLOSED（未付款交易超时关闭）、TRADE_FINISHED（交易成功，不可退款）</td></tr> <tr><td style="text-align:left">total_amount</td> <td style="text-align:left">double</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">总金额</td></tr> <tr><td style="text-align:left">currency</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">币种</td></tr> <tr><td style="text-align:left">pay_amount</td> <td style="text-align:left">double</td> <td style="text-align:left">否</td> <td style="text-align:left">-</td> <td style="text-align:left">实际支付金额</td></tr> <tr><td style="text-align:left">subject</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">256</td> <td style="text-align:left">商品标题</td></tr> <tr><td style="text-align:left">create_time</td> <td style="text-align:left">date</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">创建时间</td></tr> <tr><td style="text-align:left">pay_time</td> <td style="text-align:left">date</td> <td style="text-align:left">否</td> <td style="text-align:left">-</td> <td style="text-align:left">支付时间</td></tr> <tr><td style="text-align:left">seller_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">卖家uuid</td></tr> <tr><td style="text-align:left">buyer_id</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">32</td> <td style="text-align:left">买家uuid</td></tr></tbody></table> <h4 id="请求示例-6"><a href="#请求示例-6" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <h4 id="响应示例-6"><a href="#响应示例-6" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;trade_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;trade_status&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;total_amount&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token property">&quot;currency&quot;</span><span class="token operator">:</span><span class="token string">&quot;GXS&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;pay_amount&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span><span class="token string">&quot;布洛克城支付&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;create_time&quot;</span><span class="token operator">:</span><span class="token number">1534559335937</span><span class="token punctuation">,</span>
        <span class="token property">&quot;pay_time&quot;</span><span class="token operator">:</span><span class="token number">1534559335937</span><span class="token punctuation">,</span>
        <span class="token property">&quot;seller_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;eccbc87e4b5ce2fe28308fd9f2a7bh29&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;buyer_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;6f4922f45568161a8cdf4ad2299289jj&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例-4"><a href="#异常示例-4" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span><span class="token string">&quot;pay.remote.service.error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;服务错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="退款接口"><a href="#退款接口" aria-hidden="true" class="header-anchor">#</a> 退款接口</h3> <p>发起交易退款接口，对应的method请求参数为：blockpay.trade.refund</p> <h4 id="请求地址-7"><a href="#请求地址-7" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="http://sandbox.blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="请求方式-4"><a href="#请求方式-4" aria-hidden="true" class="header-anchor">#</a> 请求方式</h4> <blockquote><p><font size="2">method: POST</font></p> <p><font size="2">Content-Type: application/json</font></p></blockquote> <h4 id="公共请求参数-7"><a href="#公共请求参数-7" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">app_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">商户的appid</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，blockpay.trade.refund</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">long</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用时间戳</td></tr> <tr><td style="text-align:left">version</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口版本，固定为：1.0</td></tr> <tr><td style="text-align:left">notify_url</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">支付回调地址</td></tr> <tr><td style="text-align:left">biz_content</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">业务请求参数的集合 ，json格式</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="#%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D">签名算法</a></td></tr></tbody></table> <h4 id="请求参数-4"><a href="#请求参数-4" aria-hidden="true" class="header-anchor">#</a> 请求参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">out_trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">可选</td> <td style="text-align:left">32</td> <td style="text-align:left">订单支付时传入的商户订单号,和交易号不能同时为空</td></tr> <tr><td style="text-align:left">trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">可选</td> <td style="text-align:left">32</td> <td style="text-align:left">交易流水号</td></tr> <tr><td style="text-align:left">refund_reason</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">退款说明</td></tr> <tr><td style="text-align:left">refund_amount</td> <td style="text-align:left">double</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">退款金额，不能大于支付金额</td></tr></tbody></table> <h4 id="公共响应参数-7"><a href="#公共响应参数-7" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">响应结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">errorCode</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left"><a href="#%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%9A">错误码</a></td> <td style="text-align:left">pay.method.no-exist</td></tr> <tr><td style="text-align:left">errorMsg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">错误说明</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="错误码：-4"><a href="#错误码：-4" aria-hidden="true" class="header-anchor">#</a> 错误码：</h4> <table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">pay.method.no-exist</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">pay.remote.service.error</td> <td style="text-align:left">服务异常</td></tr> <tr><td style="text-align:left">pay.appid.not.exist</td> <td style="text-align:left">appid不存在</td></tr> <tr><td style="text-align:left">pay.param.sign.error</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">pay.param.currency.not_support</td> <td style="text-align:left">不支持的币种</td></tr> <tr><td style="text-align:left">pay.param.notify_url.empty</td> <td style="text-align:left">回调地址不能为空</td></tr> <tr><td style="text-align:left">pay.param.invalid</td> <td style="text-align:left">参数不合法</td></tr></tbody></table> <h4 id="响应参数-7"><a href="#响应参数-7" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">refund_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">退款流水号</td></tr></tbody></table> <h4 id="请求示例-7"><a href="#请求示例-7" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <h4 id="响应示例-7"><a href="#响应示例-7" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;refund_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;201805152202010145729284619&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例-5"><a href="#异常示例-5" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span><span class="token string">&quot;pay.remote.service.error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;服务错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="查询退款"><a href="#查询退款" aria-hidden="true" class="header-anchor">#</a> 查询退款</h3> <p>交易退款状态查询接口，对应的method请求参数为：blockpay.trade.refund.query</p> <h4 id="请求地址-8"><a href="#请求地址-8" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="http://sandbox.blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="请求方式-5"><a href="#请求方式-5" aria-hidden="true" class="header-anchor">#</a> 请求方式</h4> <blockquote><p><font size="2">method: POST</font></p> <p><font size="2">Content-Type: application/json</font></p></blockquote> <h4 id="公共请求参数-8"><a href="#公共请求参数-8" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">app_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">商户的appid</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，blockpay.trade.refund.query</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">long</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用时间戳</td></tr> <tr><td style="text-align:left">version</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口版本，固定为：1.0</td></tr> <tr><td style="text-align:left">notify_url</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">支付回调地址</td></tr> <tr><td style="text-align:left">biz_content</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">业务请求参数的集合 ，json格式</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="#%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D">签名算法</a></td></tr></tbody></table> <h4 id="请求参数-5"><a href="#请求参数-5" aria-hidden="true" class="header-anchor">#</a> 请求参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">refund_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">退款流水号</td></tr></tbody></table> <h4 id="公共响应参数-8"><a href="#公共响应参数-8" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">响应结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">errorCode</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left"><a href="#%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%9A">错误码</a></td> <td style="text-align:left">pay.method.no-exist</td></tr> <tr><td style="text-align:left">errorMsg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">错误说明</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="错误码：-5"><a href="#错误码：-5" aria-hidden="true" class="header-anchor">#</a> 错误码：</h4> <table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">pay.method.no-exist</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">pay.remote.service.error</td> <td style="text-align:left">服务异常</td></tr> <tr><td style="text-align:left">pay.appid.not.exist</td> <td style="text-align:left">appid不存在</td></tr> <tr><td style="text-align:left">pay.param.sign.error</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">pay.param.currency.not_support</td> <td style="text-align:left">不支持的币种</td></tr> <tr><td style="text-align:left">pay.param.notify_url.empty</td> <td style="text-align:left">回调地址不能为空</td></tr> <tr><td style="text-align:left">pay.param.invalid</td> <td style="text-align:left">参数不合法</td></tr></tbody></table> <h4 id="响应参数-8"><a href="#响应参数-8" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">refund_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">退款流水号</td></tr> <tr><td style="text-align:left">trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">平台交易号</td></tr> <tr><td style="text-align:left">out_trade_no</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">商家订单号</td></tr> <tr><td style="text-align:left">seller_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">32</td> <td style="text-align:left">卖家uuid</td></tr> <tr><td style="text-align:left">buyer_id</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">32</td> <td style="text-align:left">买家uuid</td></tr> <tr><td style="text-align:left">refund_amount</td> <td style="text-align:left">double</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">退款金额</td></tr> <tr><td style="text-align:left">refund_reason</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">退款说明</td></tr> <tr><td style="text-align:left">refund_date</td> <td style="text-align:left">date</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">退款时间</td></tr></tbody></table> <h4 id="请求示例-8"><a href="#请求示例-8" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <h4 id="响应示例-8"><a href="#响应示例-8" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token property">&quot;refund_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;20180515180202050488776281&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;trade_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;2018051621020105048872795&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;out_trade_no&quot;</span><span class="token operator">:</span><span class="token string">&quot;out1526478037171&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;seller_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;NL4j7MFnHZnCbuj8vEp009165&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;buyer_id&quot;</span><span class="token operator">:</span><span class="token string">&quot;HNxoJwimRjyoFitXQas008494&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;refund_amount&quot;</span><span class="token operator">:</span><span class="token number">10</span><span class="token punctuation">,</span>
        <span class="token property">&quot;refund_reason&quot;</span><span class="token operator">:</span><span class="token string">&quot;付错了&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;refund_date&quot;</span><span class="token operator">:</span><span class="token number">1534559335937</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例-6"><a href="#异常示例-6" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span><span class="token string">&quot;pay.remote.service.error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;服务错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="关闭交易"><a href="#关闭交易" aria-hidden="true" class="header-anchor">#</a> 关闭交易</h3> <p>关闭指定的支付订单接口，对应的method请求参数为：blockpay.trade.close</p> <h4 id="请求地址-9"><a href="#请求地址-9" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="http://sandbox.blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="请求方式-6"><a href="#请求方式-6" aria-hidden="true" class="header-anchor">#</a> 请求方式</h4> <blockquote><p><font size="2">method: POST</font></p> <p><font size="2">Content-Type: application/json</font></p></blockquote> <h4 id="公共请求参数-9"><a href="#公共请求参数-9" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">app_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">商户的appid</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，blockpay.trade.close</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">long</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用时间戳</td></tr> <tr><td style="text-align:left">version</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口版本，固定为：1.0</td></tr> <tr><td style="text-align:left">notify_url</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">支付回调地址</td></tr> <tr><td style="text-align:left">biz_content</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">业务请求参数的集合 ，json格式</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="#%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D">签名算法</a></td></tr></tbody></table> <h4 id="请求参数-6"><a href="#请求参数-6" aria-hidden="true" class="header-anchor">#</a> 请求参数</h4> <p>| 参数 | 类型 | 是否必须 | 最大长度 | 描述 |
| :--- | :--- | :--- | :--- |
| out_trade_no | string | 可选 | 订单支付时传入的商户订单号,和交易号不能同时为空 |
| trade_no | string | 可选 | 交易流水号 |</p> <h4 id="公共响应参数-9"><a href="#公共响应参数-9" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">响应结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">errorCode</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left"><a href="#%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%9A">错误码</a></td> <td style="text-align:left">pay.method.no-exist</td></tr> <tr><td style="text-align:left">errorMsg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">错误说明</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="错误码：-6"><a href="#错误码：-6" aria-hidden="true" class="header-anchor">#</a> 错误码：</h4> <table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">pay.method.no-exist</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">pay.remote.service.error</td> <td style="text-align:left">服务异常</td></tr> <tr><td style="text-align:left">pay.appid.not.exist</td> <td style="text-align:left">appid不存在</td></tr> <tr><td style="text-align:left">pay.param.sign.error</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">pay.param.currency.not_support</td> <td style="text-align:left">不支持的币种</td></tr> <tr><td style="text-align:left">pay.param.notify_url.empty</td> <td style="text-align:left">回调地址不能为空</td></tr> <tr><td style="text-align:left">pay.param.invalid</td> <td style="text-align:left">参数不合法</td></tr></tbody></table> <h4 id="响应参数-9"><a href="#响应参数-9" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <h4 id="请求示例-9"><a href="#请求示例-9" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <h4 id="响应示例-9"><a href="#响应示例-9" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例-7"><a href="#异常示例-7" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span><span class="token string">&quot;pay.remote.service.error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;服务错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="支持支付币种"><a href="#支持支付币种" aria-hidden="true" class="header-anchor">#</a> 支持支付币种</h3> <p>拉取支持的所有支付币种接口，对应的method请求参数为：blockpay.currency.list</p> <h4 id="请求地址-10"><a href="#请求地址-10" aria-hidden="true" class="header-anchor">#</a> 请求地址</h4> <table><thead><tr><th style="text-align:left">环境</th> <th style="text-align:left">HTTPS请求地址</th></tr></thead> <tbody><tr><td style="text-align:left">沙箱环境</td> <td style="text-align:left"><a href="http://sandbox.blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://sandbox.blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr> <tr><td style="text-align:left">正式环境</td> <td style="text-align:left"><a href="https://blockcity.gxb.io/api/blockpay/api/gateway" target="_blank" rel="noopener noreferrer">https://blockcity.gxb.io/api/blockpay/api/gateway<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></td></tr></tbody></table> <h4 id="请求方式-7"><a href="#请求方式-7" aria-hidden="true" class="header-anchor">#</a> 请求方式</h4> <blockquote><p><font size="2">method: POST</font></p> <p><font size="2">Content-Type: application/json</font></p></blockquote> <h4 id="公共请求参数-10"><a href="#公共请求参数-10" aria-hidden="true" class="header-anchor">#</a> 公共请求参数</h4> <table><thead><tr><th style="text-align:left">参数名称</th> <th style="text-align:left">参数类型</th> <th style="text-align:left">是否必须</th> <th style="text-align:left">最大长度</th> <th style="text-align:left">参数描述</th></tr></thead> <tbody><tr><td style="text-align:left">app_id</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">16</td> <td style="text-align:left">商户的appid</td></tr> <tr><td style="text-align:left">method</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口，blockpay.currency.list</td></tr> <tr><td style="text-align:left">timestamp</td> <td style="text-align:left">long</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用时间戳</td></tr> <tr><td style="text-align:left">version</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">调用的接口版本，固定为：1.0</td></tr> <tr><td style="text-align:left">notify_url</td> <td style="text-align:left">string</td> <td style="text-align:left">否</td> <td style="text-align:left">256</td> <td style="text-align:left">支付回调地址</td></tr> <tr><td style="text-align:left">biz_content</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">业务请求参数的集合 ，json格式</td></tr> <tr><td style="text-align:left">sign</td> <td style="text-align:left">string</td> <td style="text-align:left">是</td> <td style="text-align:left">-</td> <td style="text-align:left">接口签名，<a href="#%E6%94%AF%E4%BB%98%E7%AD%BE%E5%90%8D">签名算法</a></td></tr></tbody></table> <h4 id="请求参数-7"><a href="#请求参数-7" aria-hidden="true" class="header-anchor">#</a> 请求参数</h4> <h4 id="公共响应参数-10"><a href="#公共响应参数-10" aria-hidden="true" class="header-anchor">#</a> 公共响应参数</h4> <table><thead><tr><th style="text-align:left">参数</th> <th style="text-align:left">类型</th> <th style="text-align:left">是否必填</th> <th style="text-align:left">描述</th> <th style="text-align:left">示例值</th></tr></thead> <tbody><tr><td style="text-align:left">success</td> <td style="text-align:left">boolean</td> <td style="text-align:left">是</td> <td style="text-align:left">响应结果</td> <td style="text-align:left">true</td></tr> <tr><td style="text-align:left">errorCode</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left"><a href="#%E9%94%99%E8%AF%AF%E7%A0%81%EF%BC%9A">错误码</a></td> <td style="text-align:left">pay.method.no-exist</td></tr> <tr><td style="text-align:left">errorMsg</td> <td style="text-align:left">String</td> <td style="text-align:left">否</td> <td style="text-align:left">错误说明</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">data</td> <td style="text-align:left">object</td> <td style="text-align:left">否</td> <td style="text-align:left">返回的数据内容</td> <td style="text-align:left">{}</td></tr></tbody></table> <h4 id="错误码：-7"><a href="#错误码：-7" aria-hidden="true" class="header-anchor">#</a> 错误码：</h4> <table><thead><tr><th style="text-align:left">错误码</th> <th style="text-align:left">描述</th></tr></thead> <tbody><tr><td style="text-align:left">pay.method.no-exist</td> <td style="text-align:left">接口不存在</td></tr> <tr><td style="text-align:left">pay.remote.service.error</td> <td style="text-align:left">服务异常</td></tr> <tr><td style="text-align:left">pay.appid.not.exist</td> <td style="text-align:left">appid不存在</td></tr> <tr><td style="text-align:left">pay.param.sign.error</td> <td style="text-align:left">签名错误</td></tr> <tr><td style="text-align:left">pay.param.currency.not_support</td> <td style="text-align:left">不支持的币种</td></tr> <tr><td style="text-align:left">pay.param.notify_url.empty</td> <td style="text-align:left">回调地址不能为空</td></tr> <tr><td style="text-align:left">pay.param.invalid</td> <td style="text-align:left">参数不合法</td></tr></tbody></table> <h4 id="响应参数-10"><a href="#响应参数-10" aria-hidden="true" class="header-anchor">#</a> 响应参数</h4> <h4 id="请求示例-10"><a href="#请求示例-10" aria-hidden="true" class="header-anchor">#</a> 请求示例</h4> <h4 id="响应示例-10"><a href="#响应示例-10" aria-hidden="true" class="header-anchor">#</a> 响应示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;GXS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;BTC&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="异常示例-8"><a href="#异常示例-8" aria-hidden="true" class="header-anchor">#</a> 异常示例</h4> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;success&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span><span class="token string">&quot;pay.remote.service.error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorMsg&quot;</span><span class="token operator">:</span><span class="token string">&quot;服务错误&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/gxchain/blockcity-docs/edit/master/docs/en/developer/api.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/21/2018, 12:07:08 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blockcity/en/developer/capacity.html" class="prev">
          开放能力
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/blockcity/assets/js/app.dd063d02.js" defer></script><script src="/blockcity/assets/js/15.b18846f1.js" defer></script>
  </body>
</html>
